# Requirements Document

## Introduction

Система отчетности для приложения управления заявками на ремонт климатического оборудования. Система должна предоставлять различные типы отчетов с учетом ролей пользователей, включая статистику по заявкам, оборудованию, мастерским и производительности.

## Glossary

- **System**: Система управления заявками на ремонт климатического оборудования
- **Report**: Документ, содержащий структурированную информацию и статистику
- **User Role**: Роль пользователя в системе (Администратор, Менеджер, Мастер, Клиент, Оценщик качества)
- **Request**: Заявка на ремонт оборудования
- **Workshop**: Мастерская, выполняющая ремонтные работы
- **Equipment Type**: Тип климатического оборудования
- **Status**: Статус заявки (Новая, В работе, Завершена, Отменена)
- **PDF Report**: Отчет в формате PDF для печати и сохранения
- **ER Diagram**: Entity-Relationship диаграмма базы данных
- **Algorithm Document**: Документ с описанием алгоритмов системы

## Requirements

### Requirement 1

**User Story:** Как администратор, я хочу видеть общую статистику по всем заявкам, чтобы оценить загрузку системы и эффективность работы.

#### Acceptance Criteria

1. WHEN администратор открывает страницу отчетов THEN система SHALL отобразить общее количество заявок
2. WHEN администратор просматривает статистику THEN система SHALL показать количество активных заявок
3. WHEN администратор просматривает статистику THEN система SHALL показать количество завершенных заявок
4. WHEN администратор просматривает статистику THEN система SHALL рассчитать и показать среднее время выполнения заявок в днях
5. WHEN данные обновляются THEN система SHALL автоматически пересчитать все статистические показатели

### Requirement 2

**User Story:** Как менеджер, я хочу видеть статистику по типам оборудования, чтобы понимать, какие типы ремонта наиболее востребованы.

#### Acceptance Criteria

1. WHEN менеджер открывает отчет по оборудованию THEN система SHALL отобразить список всех типов оборудования с количеством заявок
2. WHEN система отображает статистику по типам THEN система SHALL рассчитать процентное соотношение для каждого типа
3. WHEN в системе нет заявок THEN система SHALL корректно обработать деление на ноль и показать 0%
4. WHEN данные сортируются THEN система SHALL упорядочить типы оборудования по количеству заявок в порядке убывания

### Requirement 3

**User Story:** Как администратор, я хочу видеть статистику по статусам заявок, чтобы контролировать процесс обработки заявок.

#### Acceptance Criteria

1. WHEN администратор просматривает отчет по статусам THEN система SHALL отобразить все возможные статусы заявок
2. WHEN система отображает статусы THEN система SHALL показать количество заявок для каждого статуса
3. WHEN система отображает статусы THEN система SHALL рассчитать процентное соотношение для каждого статуса
4. WHEN статус отображается THEN система SHALL использовать цветовую индикацию согласно настройкам статуса
5. WHEN заявка меняет статус THEN система SHALL обновить статистику в реальном времени

### Requirement 4

**User Story:** Как менеджер, я хочу экспортировать отчеты в PDF формат, чтобы распечатывать и отправлять их руководству.

#### Acceptance Criteria

1. WHEN пользователь нажимает кнопку экспорта THEN система SHALL сгенерировать PDF документ с текущими данными отчета
2. WHEN PDF генерируется THEN система SHALL включить все таблицы и графики из веб-версии отчета
3. WHEN PDF создается THEN система SHALL добавить дату и время генерации отчета
4. WHEN PDF готов THEN система SHALL предложить пользователю скачать файл
5. WHEN генерация PDF завершена THEN система SHALL использовать читаемый шрифт и корректное форматирование

### Requirement 5

**User Story:** Как администратор, я хочу видеть отчеты по мастерским, чтобы оценить загрузку и производительность каждой мастерской.

#### Acceptance Criteria

1. WHEN администратор открывает отчет по мастерским THEN система SHALL отобразить список всех мастерских
2. WHEN система показывает мастерскую THEN система SHALL отобразить количество заявок, назначенных на эту мастерскую
3. WHEN система показывает мастерскую THEN система SHALL отобразить количество завершенных заявок
4. WHEN система показывает мастерскую THEN система SHALL рассчитать процент выполнения заявок
5. WHEN система показывает мастерскую THEN система SHALL отобразить среднее время выполнения заявок для этой мастерской

### Requirement 6

**User Story:** Как пользователь с определенной ролью, я хочу видеть только те отчеты, которые доступны для моей роли, чтобы не видеть лишнюю информацию.

#### Acceptance Criteria

1. WHEN пользователь с ролью "Клиент" открывает отчеты THEN система SHALL показать только статистику по его собственным заявкам
2. WHEN пользователь с ролью "Мастер" открывает отчеты THEN система SHALL показать статистику по заявкам, назначенным на его мастерскую
3. WHEN пользователь с ролью "Менеджер" открывает отчеты THEN система SHALL показать полную статистику по всем заявкам
4. WHEN пользователь с ролью "Администратор" открывает отчеты THEN система SHALL показать полную статистику включая системные метрики
5. WHEN пользователь пытается получить доступ к отчету без прав THEN система SHALL отобразить сообщение об ошибке доступа

### Requirement 7

**User Story:** Как разработчик, я хочу иметь ER-диаграмму базы данных, чтобы понимать структуру и связи между таблицами.

#### Acceptance Criteria

1. WHEN создается ER-диаграмма THEN система SHALL включить все таблицы базы данных
2. WHEN диаграмма отображает таблицы THEN система SHALL показать все поля каждой таблицы
3. WHEN диаграмма отображает связи THEN система SHALL показать первичные и внешние ключи
4. WHEN диаграмма отображает связи THEN система SHALL указать тип связи (один-к-одному, один-ко-многим, многие-ко-многим)
5. WHEN диаграмма создается THEN система SHALL использовать стандартную нотацию ER-диаграмм

### Requirement 8

**User Story:** Как разработчик, я хочу иметь документацию с алгоритмами системы, чтобы понимать логику работы ключевых функций.

#### Acceptance Criteria

1. WHEN создается документ алгоритмов THEN система SHALL включить алгоритм аутентификации пользователей
2. WHEN создается документ алгоритмов THEN система SHALL включить алгоритм назначения заявок на мастерские
3. WHEN создается документ алгоритмов THEN система SHALL включить алгоритм расчета статистики
4. WHEN создается документ алгоритмов THEN система SHALL включить алгоритм генерации QR-кодов
5. WHEN алгоритм описывается THEN система SHALL использовать блок-схемы или псевдокод для наглядности

### Requirement 9

**User Story:** Как пользователь системы, я хочу иметь руководство пользователя, чтобы быстро освоить функционал системы.

#### Acceptance Criteria

1. WHEN создается руководство THEN система SHALL включить описание всех основных функций
2. WHEN создается руководство THEN система SHALL включить скриншоты интерфейса
3. WHEN создается руководство THEN система SHALL включить пошаговые инструкции для каждой роли
4. WHEN создается руководство THEN система SHALL включить раздел FAQ с частыми вопросами
5. WHEN руководство создается THEN система SHALL использовать понятный язык без технического жаргона

### Requirement 10

**User Story:** Как администратор, я хочу видеть отчет по продуктам и материалам, чтобы планировать закупки и производство.

#### Acceptance Criteria

1. WHEN администратор открывает отчет по продуктам THEN система SHALL отобразить список всех типов продукции
2. WHEN система показывает продукт THEN система SHALL отобразить количество заявок на ремонт этого типа продукции
3. WHEN система показывает продукт THEN система SHALL отобразить основной материал продукции
4. WHEN система показывает продукт THEN система SHALL отобразить связанные мастерские для производства
5. WHEN данные фильтруются THEN система SHALL позволить фильтровать по типу материала
