# Implementation Plan

- [x] 1. Создать алгоритм и блок-схему для задания 1





  - Разработать блок-схему основного алгоритма учета заявок по ГОСТ 19.701
  - Детализировать алгоритм расчета статистики (количество заявок, среднее время, типы неисправностей)
  - Создать спецификацию модуля с входными и выходными данными
  - _Requirements: 1.4, 2.1, 2.2, 2.4_

- [x] 1.1 Написать property-тест для алгоритма расчета статистики






  - **Property 1: Statistics calculation accuracy**
  - **Validates: Requirements 1.1, 1.2, 1.3, 1.4, 1.5**

- [x] 2. Создать ER-диаграмму для задания 2




  - Спроектировать ER-диаграмму в 3НФ с ссылочной целостностью
  - Определить все сущности, атрибуты, первичные и внешние ключи
  - Создать связи между таблицами с правильными кардинальностями
  - Экспортировать диаграмму в удобный для просмотра формат (PNG/SVG)
  - _Requirements: 7.1, 7.2, 7.3, 7.4_

- [x] 2.1 Написать property-тест для проверки полноты ER-диаграммы






  - **Property 7: Database schema completeness**
  - **Validates: Requirements 7.1, 7.2, 7.3, 7.4**

- [x] 3. Реализовать функционал экспорта отчетов в PDF





  - Установить библиотеку для генерации PDF (puppeteer или pdfkit)
  - Создать маршрут для экспорта отчета в PDF
  - Реализовать форматирование данных для PDF
  - Добавить дату и время генерации в PDF
  - Добавить кнопку экспорта на странице отчетов
  - _Requirements: 4.1, 4.2, 4.3_

- [x] 3.1 Написать property-тест для сохранения содержимого в PDF






  - **Property 6: PDF content preservation**
  - **Validates: Requirements 4.1, 4.2, 4.3**

- [x] 4. Реализовать роль-ориентированные отчеты






  - Создать middleware для проверки доступа к отчетам по ролям
  - Реализовать фильтрацию данных для роли "Клиент" (только свои заявки)
  - Реализовать фильтрацию данных для роли "Мастер" (заявки своей мастерской)
  - Реализовать полный доступ для ролей "Менеджер" и "Администратор"
  - Добавить обработку ошибок доступа с информативными сообщениями
  - _Requirements: 6.1, 6.2, 6.3, 6.4, 6.5_

- [x] 4.1 Написать property-тест для роль-ориентированной фильтрации







  - **Property 4: Role-based data filtering**
  - **Validates: Requirements 6.1, 6.2, 6.3, 6.4, 6.5**

- [ ] 5. Добавить отчет по мастерским
  - Создать SQL запрос для статистики по мастерским
  - Рассчитать количество назначенных и завершенных заявок
  - Рассчитать процент выполнения для каждой мастерской
  - Рассчитать среднее время выполнения заявок по мастерским
  - Добавить отображение в интерфейс отчетов
  - _Requirements: 5.1, 5.2, 5.3, 5.4, 5.5_

- [ ]* 5.1 Написать property-тест для статистики мастерских
  - **Property 5: Workshop statistics completeness**
  - **Validates: Requirements 5.1, 5.2, 5.3, 5.4, 5.5**

- [ ] 6. Добавить отчет по продуктам и материалам
  - Создать SQL запрос для связи продуктов с заявками
  - Отобразить типы продукции и количество заявок
  - Показать основной материал для каждого типа продукции
  - Отобразить связанные мастерские для производства
  - Добавить фильтрацию по типу материала
  - _Requirements: 10.1, 10.2, 10.3, 10.4, 10.5_

- [ ]* 6.1 Написать property-тест для отчета по продуктам
  - **Property 9: Product-workshop relationship accuracy**
  - **Validates: Requirements 10.1, 10.2, 10.3, 10.4, 10.5**

- [ ] 7. Улучшить расчет процентов в отчетах
  - Добавить проверку деления на ноль для пустых наборов данных
  - Убедиться что сумма процентов равна 100%
  - Добавить округление до целых чисел
  - Обработать edge case с пустой базой данных
  - _Requirements: 2.2, 2.3, 3.3_

- [ ]* 7.1 Написать property-тест для расчета процентов
  - **Property 2: Percentage calculations sum to 100**
  - **Validates: Requirements 2.2, 3.3**

- [ ] 8. Checkpoint - Убедиться что все тесты проходят
  - Ensure all tests pass, ask the user if questions arise.

- [ ] 9. Создать документ с алгоритмами для задания 1
  - Описать алгоритм аутентификации пользователей
  - Описать алгоритм назначения заявок на мастерские
  - Описать алгоритм расчета статистики
  - Описать алгоритм генерации QR-кодов
  - Использовать блок-схемы или псевдокод для наглядности
  - Сохранить в формате Markdown или PDF
  - _Requirements: 8.1, 8.2, 8.3, 8.4, 8.5_

- [ ] 10. Создать руководство системного программиста для задания 3
  - Описать архитектуру системы
  - Документировать структуру базы данных
  - Описать основные модули и их взаимодействие
  - Добавить инструкции по установке и настройке
  - Описать процесс резервного копирования БД
  - Добавить раздел по устранению неполадок
  - Соответствовать стандарту ЕСПД
  - _Requirements: 9.1, 9.2, 9.3, 9.4_

- [ ]* 10.1 Написать property-тест для полноты руководства
  - **Property 8: Documentation completeness**
  - **Validates: Requirements 9.1, 9.2, 9.3**

- [ ] 11. Создать скрипт резервного копирования БД
  - Создать скрипт для экспорта базы данных SQLite
  - Добавить автоматическое именование файлов с датой
  - Создать папку для хранения резервных копий
  - Добавить документацию по восстановлению из резервной копии
  - _Requirements: Задание 2_

- [ ] 12. Добавить анализ качества кода
  - Проверить наличие обработки ошибочных данных
  - Проверить наличие валидации входных данных
  - Проверить наличие комментариев в неочевидных местах
  - Проверить соответствие CodeConvention (camelCase для JS)
  - Создать отчет по качественным характеристикам кода
  - _Requirements: Задание 3_

- [ ] 13. Final Checkpoint - Убедиться что все тесты проходят
  - Ensure all tests pass, ask the user if questions arise.

- [ ] 14. Создать README с инструкциями по запуску
  - Описать требования к системе
  - Добавить инструкции по установке зависимостей
  - Описать процесс инициализации базы данных
  - Добавить примеры использования
  - Описать структуру проекта
  - _Requirements: 9.1_
